# CVE-2021-44228
 
A critical severity vulnerability ([CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228)) impacting multiple versions of the Apache Log4j 2 utility was disclosed publicly via the projectâ€™s GitHub on December 9, 2021. The vulnerability impacts all Apache Log4j 2 versions prior to 2.15.0. This advisory details the impact on Mirantis products.
 
## Not Impacted

We can confirm that the following products are not impacted
 
* Mirantis Container Runtime
* Mirantis Kubernetes Engine
* Mirantis Secure Registry
* Mirantis Container Cloud
* Mirantis OpenStack
* Lens
* K0s

**Customers using these products do not need to take any action**.

## Impacted

### [Lens Spaces](https://k8slens.dev/spaces.html).
Patches[^1] have been applied and no indicators of compromise have been observed.  **Customers do not need to take any action**.

[^1]: Lens spaces uses [metabase](https://www.metabase.com/) internally which was vulnerable. 

### [Mirantis Cloud Platform (MCP)](https://docs.mirantis.com/mcp/q4-18/mcp-ref-arch/common/preface.html) up to and including 2019.2.16

The MCP [StackLight](https://www.mirantis.com/software/mcp/stacklight/) ElasticSearch component is impacted by a potential leak of information by DNS[^2]. **The component is not vulnerable to Remote Code Execution**. Given the limited data which can be leaked, the Mirantis PSIRT scores the vulnerability severity as LOW (CVSSv3.1 score [3.6](https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=AV:N/AC:H/PR:N/UI:N/S:U/C:L/I:N/A:N/E:H/RL:T/RC:C&version=3.1)).
 
[^2]: ElasticSearch on MCP uses JDK 8 https://discuss.elastic.co/t/apache-log4j2-remote-code-execution-rce-vulnerability-cve-2021-44228-esa-2021-31/291476
#### Recommended Customer Actions

On MCP StackLight nodes, append `-Dlog4j2.formatMsgNoLookups=true` to the file `/etc/elasticsearch/jvm.options` and execute `systemctl restart elasticsearch` to restart the elasticsearch process. When a maintenance release is available, it is recommended to upgrade.
